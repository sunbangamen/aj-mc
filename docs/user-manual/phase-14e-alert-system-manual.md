# Phase 14E 경고 및 임계값 시스템 사용 매뉴얼

## 📋 목차
1. [개요](#개요)
2. [시스템 접근](#시스템-접근)
3. [경고 관리](#경고-관리)
4. [임계값 설정](#임계값-설정)
5. [시뮬레이션 제어](#시뮬레이션-제어)
6. [FAQ](#faq)

---

## 📌 개요

Phase 14E 경고 및 임계값 시스템은 센서 데이터의 실시간 모니터링과 자동 경고 생성을 제공하는 종합 관리 시스템입니다.

### 🎯 주요 기능
- **실시간 경고 생성**: 센서값이 설정된 임계값을 벗어날 때 자동 경고
- **하드웨어 상태 모니터링**: 배터리, 신호강도, 유지보수 알림
- **임계값 관리**: 센서별 경고/위험 범위 설정
- **경고 이력 관리**: 모든 경고의 발생, 확인, 삭제 이력 추적

### 🔧 운영 메타데이터 지원
- **하드웨어 정보**: 배터리 잔량, WiFi 신호강도, 펌웨어 버전
- **유지보수 정보**: 설치일, 마지막 점검일, 교정일, 보증 만료일
- **품질 지표**: 정확도, 신뢰도, 오류 횟수

---

## 🚀 시스템 접근

### 1. 시스템 관리 페이지 접근
1. 웹 브라우저에서 모니터링 시스템에 접속
2. 상단 네비게이션에서 **"🔧 시스템 관리"** 클릭
3. `/admin-panel` 페이지로 이동

### 2. 관리 탭 구성
- **🚨 경고 관리**: 활성 경고 확인 및 관리
- **📊 임계값 설정**: 센서별 경고 임계값 설정
- **🎮 시뮬레이션 제어**: 센서 데이터 시뮬레이션 관리

---

## 🚨 경고 관리

### 경고 타입 및 우선순위

| 타입 | 아이콘 | 우선순위 | 설명 |
|------|--------|----------|------|
| THRESHOLD_ALERT | 🚨 | 1 (최고) | 센서값이 위험 범위 초과 |
| SENSOR_OFFLINE | 📵 | 1 (최고) | 센서 오프라인 상태 |
| THRESHOLD_WARNING | ⚠️ | 2 | 센서값이 경고 범위 초과 |
| BATTERY_LOW | 🔋 | 2 | 배터리 잔량 부족 (20% 미만) |
| SIGNAL_WEAK | 📶 | 3 | WiFi 신호 약함 (-70dBm 미만) |
| MAINTENANCE_DUE | 🔧 | 4 | 정기 점검 필요 (90일 경과) |

### 경고 관리 기능

#### 1. 경고 목록 보기
- **전체 경고**: 모든 경고 표시
- **활성 경고**: 확인되지 않은 경고만 표시
- **확인된 경고**: 확인 완료된 경고만 표시

#### 2. 경고 정렬
- **시간순**: 최신 경고부터 표시 (기본값)
- **우선순위**: 높은 우선순위부터 표시
- **타입별**: 경고 타입별로 그룹화

#### 3. 경고 처리
```
✅ 개별 경고 확인
- 활성 경고 항목에서 "✅" 버튼 클릭
- 확인된 경고는 "확인됨" 상태로 변경

✅ 모든 경고 확인
- 상단의 "✅ 모든 경고 확인" 버튼 클릭
- 모든 활성 경고를 일괄 확인 처리

🗑️ 경고 삭제
- 확인된 경고에서 "🗑️" 버튼 클릭
- 경고 목록에서 완전 제거
```

#### 4. 경고 정보 읽기
각 경고에는 다음 정보가 포함됩니다:
- **현장/센서**: 경고가 발생한 현장과 센서 정보
- **발생 시간**: 경고 발생 시각
- **상세 메시지**: 경고 원인과 측정값
- **우선순위**: 경고의 중요도

---

## 📊 임계값 설정

### 센서별 임계값 구성

#### 1. 지원 센서 타입
- **초음파 센서**: 거리 측정 (cm)
- **온도 센서**: 온도 측정 (°C)
- **습도 센서**: 습도 측정 (%)
- **압력 센서**: 압력 측정 (hPa)

#### 2. 임계값 설정 방법

```
1. "📊 임계값 설정" 탭 선택
2. "⚙️ 설정 변경" 버튼 클릭
3. 각 센서별로 다음 값 설정:

⚠️ 경고 범위 (Warning)
- 최소값 ~ 최대값 설정
- 이 범위에 들어오면 경고 상태

🚨 위험 범위 (Alert)
- 최소값 ~ 최대값 설정
- 이 범위에 들어오면 위험 상태

📵 오프라인 판정 시간
- 센서 데이터 수신 타임아웃 설정 (초)
- 지정 시간 동안 데이터 없으면 오프라인

4. "💾 저장" 버튼으로 설정 저장
```

#### 3. 기본 임계값

| 센서 타입 | 경고 범위 | 위험 범위 | 오프라인 시간 |
|-----------|-----------|-----------|---------------|
| 초음파 | 100~199cm | 200~300cm | 60초 |
| 온도 | 26~35°C | 36~50°C | 60초 |
| 습도 | 61~80% | 81~95% | 60초 |
| 압력 | 990~999hPa | 980~989hPa | 60초 |

#### 4. 유효성 검증
시스템이 자동으로 다음을 검증합니다:
- 최소값 < 최대값
- 경고 범위와 위험 범위의 논리적 순서
- 오프라인 시간 범위 (10초~1시간)

---

## 🎮 시뮬레이션 제어

### 시뮬레이션 모니터링

#### 1. 실시간 통계
- **시뮬레이션 사이트**: 현재 시뮬레이션 중인 현장 수
- **총 업데이트 수**: 누적 센서 데이터 업데이트 횟수
- **평균 처리 시간**: 시뮬레이션 사이클 평균 소요 시간
- **오류 수**: 발생한 오류 횟수

#### 2. 시뮬레이션 설정

```
시뮬레이션 모드:
🎲 랜덤 시뮬레이션 - 완전 랜덤 센서 데이터 생성
📋 시나리오 기반 - 정상→경고→정상 패턴 순환
📈 점진적 변화 - 이전값 기준 점진적 변화

업데이트 간격:
1~60초 범위에서 설정 가능
기본값: 3초
```

#### 3. 시뮬레이션 제어

```
▶️ 시뮬레이션 시작
- 모든 등록된 현장의 센서 데이터 생성 시작
- 설정된 간격으로 자동 업데이트

⏹️ 시뮬레이션 중지
- 모든 자동 업데이트 중지
- 현재 데이터는 그대로 유지
```

#### 4. 빠른 테스트

시뮬레이션 중이 아니어도 모든 센서를 특정 상태로 즉시 설정:

- **✅ 정상**: 모든 센서를 정상 상태로
- **⚠️ 경고**: 모든 센서를 경고 상태로
- **🚨 위험**: 모든 센서를 위험 상태로
- **📵 오프라인**: 모든 센서를 오프라인으로

---

## ❓ FAQ

### Q1. 경고가 너무 자주 발생해요
**A**: 임계값 설정을 조정하세요:
1. "📊 임계값 설정" 탭에서 "⚙️ 설정 변경"
2. 경고 범위를 넓히거나 위험 범위만 사용
3. 오프라인 판정 시간을 늘려서 일시적 연결 끊김 무시

### Q2. 경고가 발생하지 않아요
**A**: 다음을 확인하세요:
1. 시뮬레이션이 실행 중인지 확인
2. 임계값이 올바르게 설정되었는지 확인
3. 빠른 테스트로 "⚠️ 경고" 또는 "🚨 위험" 버튼 클릭하여 테스트

### Q3. 오프라인 센서가 계속 표시돼요
**A**: 다음 중 하나를 시도하세요:
1. 시뮬레이션을 다시 시작
2. 빠른 테스트로 "✅ 정상" 버튼 클릭
3. 해당 센서의 하드웨어 연결 상태 확인

### Q4. 실제 아두이노 연동 시 주의사항은?
**A**:
- 아두이노에서 배터리 잔량, WiFi 신호강도 데이터를 포함하여 전송
- 펌웨어 버전, 하드웨어 모델 정보를 초기화 시 설정
- 정기 점검일, 교정일 등은 관리자가 수동으로 Firebase에 업데이트

### Q5. 경고 데이터는 얼마나 보관되나요?
**A**:
- 활성 경고: 확인/삭제할 때까지 무제한 보관
- 경고 히스토리: 기본 7일간 보관 (설정 변경 가능)
- Firebase 용량에 따라 자동 정리 로직 추가 권장

---

## 🔗 관련 문서

- [Phase 14D 운영 메타데이터 매뉴얼](phase-14d-metadata-manual.md)
- [Arduino 통합 가이드](../arduino-integration-guide.md)
- [Firebase 데이터 구조](../firebase-data-structure.md)
- [시스템 아키텍처](../system-architecture.md)

---

**📅 작성일**: 2024년 Phase 14E 구현 완료
**✍️ 작성자**: Claude Code AI Assistant
**📋 버전**: v1.0.0